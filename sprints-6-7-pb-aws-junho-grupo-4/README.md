# **API-TTS - HELP DESK**

## **üë• Desenvolvedores**
| [<img loading="lazy" src="https://avatars.githubusercontent.com/u/167718668?v=4" width="115" alt="Jean Carlos Penha da Concei√ß√£o">](https://github.com/JeanPTBR) <br>[Jean Carlos Penha da Concei√ß√£o](https://github.com/JeanPTBR) | [<img loading="lazy" src="https://avatars.githubusercontent.com/u/114765722?v=4" width="115" alt="Silvio Cabral de Melo">](https://github.com/SilvioCMJ) <br>[Silvio Cabral de Melo](https://github.com/SilvioCMJ) | [<img loading="lazy" src="https://avatars.githubusercontent.com/u/167145673?v=4" width="115" alt="Roger Santos Vargas">](https://github.com/Rogerdev02) <br>[Roger Santos Vargas](https://github.com/Rogerdev02) | [<img loading="lazy" src="https://avatars.githubusercontent.com/u/95103547?v=4" width="115" alt="Monique da Silva Borges">](https://github.com/niqueborges) <br>[Monique da Silva Borges](https://github.com/niqueborges) |
|:---:|:---:|:---:|:---:|


---




## **üìë √çndice**
- [üìà Status do Projeto](#-status-do-projeto)
- [‚ú® Funcionalidades](#-funcionalidades)
- [‚öôÔ∏è Arquitetura e Fluxo de Trabalho](#-arquitetura-e-fluxo-de-trabalho)
- [ü§ñ Chatbot Help Desk - Detalhes](#-chatbot-help-desk---detalhes)
- [üóÉÔ∏è Banco de Dados](#-banco-de-dados)
- [‚öôÔ∏è Vari√°veis de Ambiente](#-vari√°veis-de-ambiente)
- [üì¶ Como Rodar a Aplica√ß√£o](#-como-rodar-a-aplica√ß√£o)
- [üöÄ Deploy](#-deploy)
- [üíª Tecnologias Utilizadas](#-tecnologias-utilizadas)
- [üìÇ Estrutura de Diret√≥rios](#-estrutura-de-diret√≥rios)
- [üìê Padr√µes Utilizados](#-padr√µes-utilizados)
- [üìÖ Metodologia de Desenvolvimento](#-metodologia-de-desenvolvimento)
- [üòø Principais Dificuldades](#-principais-dificuldades)
- [üìù Licen√ßa](#-licen√ßa)

---


## **üìà Status do Projeto**
üöÄ **Status**: Finalizado

Este projeto tem como objetivo desenvolver uma **API de Text-to-Speech (TTS)** usando o **Amazon Polly** para converter textos em √°udio, armazenar os arquivos no **S3**, e usar o **DynamoDB** para gerenciar os metadados. Al√©m disso, h√° uma integra√ß√£o com o **Amazon Lex v2** e o **Slack**, onde um chatbot chamado **Help Desk** captura e processa as mensagens dos usu√°rios, retornando respostas em √°udio relacionadas a **problemas de hardware de Notebooks e Desktops**.

---

## **‚ú® Funcionalidades**
1. **Convers√£o de Texto para √Åudio**:
   - A API recebe uma frase via POST, gera um hash √∫nico para a frase e verifica no DynamoDB se o √°udio j√° foi criado. Caso contr√°rio, o Polly gera o √°udio, que √© armazenado no S3.
   
2. **Integra√ß√£o com Chatbot Amazon Lex e Slack**:
   - O chatbot **Help Desk**, integrado ao Lex v2, permite que usu√°rios no Slack enviem perguntas sobre hardware de **Notebooks** e **Desktops**. O bot processa as inten√ß√µes (intents), captura par√¢metros relevantes (slots) e fornece respostas por meio de **cards** com texto e √°udio, retornados pela API TTS.

3. **Persist√™ncia de Dados**:
   - As frases e metadados s√£o armazenados no **DynamoDB**, enquanto os arquivos de √°udio s√£o salvos no **S3**.
---



## **‚öôÔ∏è Arquitetura e Fluxo de Trabalho**
A arquitetura do projeto envolve os seguintes componentes:

1. **API de TTS**:
Exemplo de requisi√ß√£o POST:
   ```json
   {
     "phrase": "Por favor, converta este texto para √°udio"
   }
   ```

   Exemplo de resposta:
   ```json
   {
     "received_phrase": "Por favor, converta este texto para √°udio",
     "url_to_audio": "https://meu-bucket-s3/audio-xyz.mp3",
     "created_audio": "2023-09-20 17:00:00",
     "unique_id": "hash-da-frase"
   }
   ```
---

## **ü§ñ Chatbot Help Desk - Detalhes**
O chatbot **Help Desk** foi projetado para interagir com usu√°rios que enfrentam problemas relacionados ao hardware de Notebooks e Desktops. Ele fornece respostas detalhadas em texto e √°udio, ajudando os usu√°rios a identificar e resolver quest√µes comuns.

- Para utilizar o nosso chatbot utilize esse link para entrar no Workspace do Slack e selecione o **DeskBotFinal** dentro de **Apps**:
   https://join.slack.com/t/compassuolsede/shared_invite/zt-2r678ikhe-zOvQVfLK0CzbX~BFRurEQg

Abaixo est√£o as principais caracter√≠sticas do chatbot:

### **Intents** (Inten√ß√µes):
1. **Sauda√ß√£o**:
   - **Exemplo de intera√ß√£o**: "Oi, estou com problemas no dispositivo."
   - **Resposta**: "Ol√°! Eu sou o HelpDesk bot, seu assistente t√©cnico de hardware. Descreva o problema que voc√™ est√° enfrentando, e vou te ajudar a solucion√°-lo!"

2. **Problema de Tela preta**:
   - **Exemplo de intera√ß√£o**: "Meu computador est√° com problema de tela preta. Como posso resolver?"
   - **Resposta**: "Verifique a conex√£o do monitor: Certifique-se de que o cabo do monitor est√° bem conectado √† placa de v√≠deo ou √† sa√≠da de v√≠deo da placa-m√£e."

3. **Problema de superaquecimento**:
   - **Exemplo de intera√ß√£o**: "Meu computador est√° esquentando muito. O que posso fazer?"
   - **Resposta**: "Limpeza interna: Abra o dispositivo e limpe a poeira dos ventiladores, dissipadores de calor e componentes com ar comprimido. Poeira acumulada pode obstruir o fluxo de ar."

4. **Dispositivo n√£o liga**:
   - **Exemplo de intera√ß√£o**: "Meu computador n√£o liga. O que pode estar errado?"
   - **Resposta**: "Verifique a alimenta√ß√£o: Certifique-se de que o cabo de energia est√° conectado corretamente e que a tomada est√° funcionando."

5. **Problema de desempenho lento**:
   - **Exemplo de intera√ß√£o**: "Meu computador est√° lento. Como solucionar?"
   - **Resposta**: "Verifique o armazenamento: Certifique-se de que o disco r√≠gido (HD ou SSD) n√£o est√° cheio. Unidades muito cheias podem reduzir o desempenho. Considere usar um SSD se estiver usando um HD."

6. **Dispositivo reiniciando**:
   - **Exemplo de intera√ß√£o**: "Meu computador est√° reiniciando. Como resolver?"
   - **Resposta**: "Mem√≥ria RAM: Retire e reinsira os m√≥dulos de RAM. Teste um de cada vez em diferentes slots. Use ferramentas como MemTest86 para verificar erros de RAM."
  

### **Slots** (Par√¢metros):
- **Dispositivos_Slot**: Identifica o dispositivo do usu√°rio.
- **HardwareProblems**: Captura o tipo de problema do usu√°rio.
- **SimN√£o**: Captura a resposta do usu√°rio caso exista outros problemas.

### **Cards**:
- Para cada resposta fornecida, o chatbot retorna um **card** visual com:
   - **Tela preta**
   - **Superaquecimento** 
   - **Dispositivo n√£o liga**
   - **Desempenho lento**
   - **Dispositivo reiniciando**
  
   **Exemplo de estrutura de card:**
   ```
   {
     {"text": "Tela preta", "value": "problema_tela_preta"},
     {"text": "Super Aquecimento", "value": "problema_superaquecimento"},
     {"text": f"{dispositivo} N√£o liga", "value": "problema_nao_liga"},
     {"text": "Desempenho Lento", "value": "problema_desempenho_lento"},
     {"text": f"{dispositivo} Reiniciando", "value": "problema_reiniciando"}
   }
   ```


---

## **üóÉÔ∏è Banco de Dados**
O projeto usa dois principais servi√ßos de armazenamento:

- **DynamoDB**: Armazena o hash das frases e as URLs dos arquivos no S3. Estrutura de exemplo:
  - `unique_id`: Hash gerado a partir da frase.
  - `phrase`: A frase original.
  - `audio_url`: URL do √°udio no S3.
  - `timestamp`: Data de cria√ß√£o.

- **S3**: Armazena os arquivos de √°udio gerados pelo Polly.

---

## **‚öôÔ∏è Vari√°veis de Ambiente**
As vari√°veis de desenvolvimento s√£o configuradas automaticamente ao executar a API.

---

## **üì¶ Como Rodar a Aplica√ß√£o**

### **Pr√©-requisitos**:
- **Serverless Framework** instalado.
- Credenciais AWS configuradas corretamente.

### **Passos**:

1. **Clone o reposit√≥rio**:
   ```bash
   git clone https://github.com/Compass-pb-aws-2024-JUNHO/sprints-6-7-pb-aws-junho.git
   ```
2. **Criar o ambiente de desenvolvimento**:

   Windows
   ```bash
   cria√ß√£o: python -m venv inference
   ativa√ß√£o: .\inference\Scripts\activate.bat
   ```
   Linux
   ```bash
   instalar python venv: sudo apt install python3-venv
   cria√ß√£o: python -m venv inference
   ativa√ß√£o: source inference/bin/activate     
   ```

3. **Instale o Serverless Framework**:
   ```bash
   npm install -g serverless
   ```

4. **Instale as depend√™ncias**:
   ```bash
   pip install -r requirements.txt
   ```

5. **Configurar as vari√°veis de ambiente**:
   ```bash
   task config
   ```

6. **Execute o deploy da aplica√ß√£o**:
   ```bash
   task deploy
   ```

7. **Verifique os endpoints gerados** e utilize a rota `/v1/tts` para transformar texto em √°udio.

8. **Teste a API localmente**:
   ```bash
   task run
   ```

---

## **üöÄ Deploy**
O deploy √© realizado via **Serverless Framework**, que configura e gerencia os servi√ßos AWS necess√°rios. Isso ir√° criar a API no **API Gateway**, as fun√ß√µes no **Lambda** e configurar os buckets no **S3** e as tabelas no **DynamoDB**.

- **Lambda** para a l√≥gica de convers√£o.
- **API Gateway** para exposi√ß√£o das rotas.
- **Polly** para gera√ß√£o de √°udio.
- **DynamoDB** e **S3** para armazenamento de dados e arquivos.

Para testar a rota do endpoint utilizado no chatbot:
https://rmbshe6lg3.execute-api.us-east-1.amazonaws.com/v1/tts

---


## **üíª Tecnologias Utilizadas**
- **Amazon Polly**: Servi√ßo de convers√£o de texto para fala.
- **Amazon Lambda**: Executa c√≥digo em resposta a eventos sem necessidade de gerenciar servidores.
- **Amazon S3**: Armazenamento escal√°vel e dur√°vel dos arquivos de √°udio.
- **Amazon DynamoDB**: Banco de dados NoSQL utilizado para armazenar metadados.
- **Amazon Lex v2**: Processa linguagem natural para construir chatbots conversacionais.
- **Slack**: Interface de mensagens usada para intera√ß√µes do chatbot.
- **Python 3.9**: Linguagem utilizada no desenvolvimento da aplica√ß√£o.
- **Serverless Framework**: Orquestra o deploy dos servi√ßos serverless.
- **Git**: Sistema de controle de vers√£o para rastrear altera√ß√µes e facilitar a colabora√ß√£o.

---


<div align="center">
      
![Amazon Polly](https://img.shields.io/badge/Amazon%20Polly-FF9900?style=flat-square&logo=amazonaws&logoColor=white)
![Amazon S3](https://img.shields.io/badge/Amazon%20S3-569A31?style=flat-square&logo=amazonaws&logoColor=white)
![Amazon DynamoDB](https://img.shields.io/badge/Amazon%20DynamoDB-4053D6?style=flat-square&logo=amazonaws&logoColor=white)
![Amazon Lex](https://img.shields.io/badge/Amazon%20Lex-4B8BBE?style=flat-square&logo=amazonaws&logoColor=white)
![Slack](https://img.shields.io/badge/Slack-4A154B?style=flat-square&logo=slack&logoColor=white)
![Python](https://img.shields.io/badge/Python-3776AB?style=flat-square&logo=python&logoColor=white)
![Serverless Framework](https://img.shields.io/badge/Serverless%20Framework-23B17B?style=flat-square&logo=serverless&logoColor=white)
![Git](https://img.shields.io/badge/Git-F05032?style=flat-square&logo=git&logoColor=white)
![AWS Lambda](https://img.shields.io/badge/AWS%20Lambda-FF9900?style=flat-square&logo=amazonaws&logoColor=white)

</div>

---


```bash
SPRINT-6-7-DEV/
‚îú‚îÄ‚îÄ api-tts/                        # Diret√≥rio da API Text-to-Speech
‚îÇ   ‚îú‚îÄ‚îÄ aws/                        # Servi√ßos AWS utilizados pela API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dynamodb/               # Intera√ß√µes com DynamoDB
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ polly/                  # Intera√ß√µes com AWS Polly
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ s3/                     # Intera√ß√µes com S3
‚îÇ   ‚îú‚îÄ‚îÄ dev/                        # Arquivos relacionados ao desenvolvimento
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ collections/            # Cole√ß√µes Postman para testes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tasks/                  # Scripts e utilidades para desenvolvimento
‚îÇ   ‚îú‚îÄ‚îÄ handlers/                   # Manipuladores de requisi√ß√µes da API
‚îÇ   ‚îú‚îÄ‚îÄ utils/                      # Utilidades e fun√ß√µes auxiliares
‚îÇ   ‚îî‚îÄ‚îÄ serverless.yml              # Arquivo de configura√ß√£o Serverless
‚îú‚îÄ‚îÄ assets/                         # Recursos como imagens e arquivos est√°ticos
‚îú‚îÄ‚îÄ lex_chatbot/                    # Diret√≥rio relacionado ao chatbot Lex
‚îÇ   ‚îú‚îÄ‚îÄ DeskBotFinal.zip            # Arquivo final do chatbot
‚îÇ   ‚îî‚îÄ‚îÄ lambda_function.py          # Fun√ß√£o Lambda do chatbot
‚îú‚îÄ‚îÄ package.json                    # Configura√ß√£o e depend√™ncias Node.js
‚îú‚îÄ‚îÄ pyproject.toml                  # Configura√ß√£o do Poetry para depend√™ncias Python
‚îú‚îÄ‚îÄ requirements.txt                # Depend√™ncias Python para o projeto
‚îú‚îÄ‚îÄ README.md                       # Documenta√ß√£o principal do projeto
‚îú‚îÄ‚îÄ .env                            # Arquivo de vari√°veis de ambiente
‚îî‚îÄ‚îÄ .gitignore                      # Arquivo de configura√ß√£o do Git
```
---

## **üìê Padr√µes Utilizados**
- **Commits Sem√¢nticos**: Para manter um hist√≥rico claro e organizado.
- **RESTFul API**: Para comunica√ß√£o entre os servi√ßos.
- **Arquitetura Serverless**: Toda a aplica√ß√£o utiliza servi√ßos gerenciados pela AWS.
- **Python PEP8**: Segue os padr√µes de formata√ß√£o de c√≥digo Python.

---

## **üìÖ Metodologia de Desenvolvimento**
O desenvolvimento seguiu a metodologia **√Ågil**, com as seguintes pr√°ticas:

1. **Sprints**: Ciclos de desenvolvimento com metas definidas.
2. **Daily Meetings**: Reuni√µes di√°rias para acompanhamento de progresso.
3. **Code Review**: Revis√µes de c√≥digo regulares para garantir qualidade e coes√£o.

---

## **üòø Principais Dificuldades**
1. **Integra√ß√£o com o Amazon Lex**: A configura√ß√£o inicial do Lex e o mapeamento correto das inten√ß√µes e slots apresentaram desafios, mas foram superados com pesquisa e testes cont√≠nuos.
2. **Erros de Permiss√£o na AWS**: Configura√ß√µes de IAM exigiram ajustes detalhados para garantir o acesso correto entre os servi√ßos.
3. **Sincroniza√ß√£o de √Åudio e Texto**: Garantir que a resposta do chatbot no Slack estivesse sincronizada com o √°udio gerado.
---

## **üìù Licen√ßa**

Este projeto est√° sob a Licen√ßa MIT. Veja o arquivo LICENSE para mais detalhes.


---


Este README foi estruturado conforme as melhores pr√°ticas recomendadas no Programa de Bolsas Compass UOL e AWS.


